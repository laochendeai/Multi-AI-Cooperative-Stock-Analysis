# 🚀 TradingAgents 启动指南

## 📋 系统要求

- Python 3.8+
- 稳定的网络连接
- 至少4GB可用内存

## 🔧 启动方式

### 方式一：使用增强版界面（推荐）

```bash
python final_ui.py
```

这是您之前使用的启动方式，现在已经集成了所有新功能：

✅ **新增功能**：
- 🤖 动态LLM配置管理
- 👥 智能体模型选择
- 📊 多模板报告生成
- 🧠 智能文档精简
- 🔍 模型兼容性检查

✅ **保持兼容**：
- 所有原有功能完全保留
- 界面布局基本不变
- 配置文件自动迁移

### 方式二：使用原始界面

```bash
python app_tradingagents_upgraded.py
```

这是原始的启动方式，功能完整但界面相对简单。

## 🎯 启动后的操作

### 1. 首次启动检查

启动后，系统会自动检测增强功能模块：

- ✅ **增强功能已启用**：显示 "TradingAgents v2.0"
- ⚠️ **基础功能版本**：显示 "TradingAgents v1.0"

### 2. 配置LLM提供商（重要）

在开始分析前，请先配置LLM提供商：

1. 点击 "🤖 LLM模型配置" 标签页
2. 选择提供商并输入API密钥
3. 点击 "测试连接" 验证配置
4. 保存配置

**支持的提供商**：
- OpenAI (GPT-4, GPT-3.5-turbo)
- DeepSeek (deepseek-chat, deepseek-coder)
- Google (Gemini Pro)
- Moonshot (Kimi K2)
- 阿里百炼 (通义千问)

### 3. 配置智能体模型（可选）

如果启用了增强功能，可以为每个智能体选择最适合的模型：

1. 点击 "👥 智能体管理" 标签页
2. 选择智能体类别和具体智能体
3. 选择LLM提供商和模型
4. 查看兼容性评估
5. 更新配置

### 4. 开始股票分析

1. 在左侧输入股票代码（如：600519、000001）
2. 选择分析深度（1-4轮）
3. 点击 "🚀 开始智能分析"
4. 等待分析完成

### 5. 生成和导出报告

**增强版报告生成**（如果可用）：
1. 点击 "📋 报告管理" 标签页
2. 选择报告模板（标准/详细/高管/技术/研究）
3. 配置格式选项
4. 生成Markdown格式报告

**传统报告导出**：
1. 选择导出格式（JSON/TXT/Markdown）
2. 点击 "导出当前报告"

## 🔧 故障排除

### 启动问题

**问题**：启动时显示模块导入错误
```
⚠️ 增强功能模块未找到: No module named 'core.enhanced_llm_manager'
```

**解决方案**：
1. 确认 `core/` 目录存在
2. 检查新增的模块文件是否完整
3. 系统会自动回退到基础功能，不影响正常使用

**问题**：界面无法访问
```
❌ 启动失败: [Errno 10048] Only one usage of each socket address
```

**解决方案**：
1. 检查端口7860是否被占用
2. 关闭其他Gradio应用
3. 重启系统后再试

### 配置问题

**问题**：API连接测试失败

**解决方案**：
1. 检查API密钥是否正确
2. 确认网络连接正常
3. 验证API服务是否可用
4. 检查防火墙设置

**问题**：智能体配置丢失

**解决方案**：
1. 检查 `config/` 目录权限
2. 手动重新配置
3. 使用 "重置为默认配置" 功能

### 分析问题

**问题**：分析过程中断

**解决方案**：
1. 检查API配额是否充足
2. 确认网络连接稳定
3. 降低分析深度重试
4. 查看错误日志详情

**问题**：结果显示不完整

**解决方案**：
1. 启用智能文档精简功能
2. 检查浏览器控制台错误
3. 刷新页面重试

## 📊 功能对比

| 功能 | 基础版 (v1.0) | 增强版 (v2.0) |
|------|---------------|---------------|
| 股票分析 | ✅ | ✅ |
| 15个智能体 | ✅ | ✅ |
| ChromaDB记忆 | ✅ | ✅ |
| 基础报告导出 | ✅ | ✅ |
| 动态LLM配置 | ❌ | ✅ |
| 智能体模型选择 | ❌ | ✅ |
| 多模板报告 | ❌ | ✅ |
| 智能文档精简 | ❌ | ✅ |
| 兼容性检查 | ❌ | ✅ |

## 🎯 最佳实践

### 性能优化

1. **选择合适的模型**：
   - 速度优先：选择 turbo 类型模型
   - 质量优先：选择 pro/max 类型模型

2. **合理设置分析深度**：
   - 日常分析：1-2轮
   - 重要决策：3-4轮

3. **网络优化**：
   - 使用稳定的网络连接
   - 避免高峰期使用

### 配置建议

1. **LLM提供商配置**：
   - 配置多个提供商作为备选
   - 定期检查API配额
   - 保持API密钥安全

2. **智能体配置**：
   - 根据任务特性选择模型
   - 参考兼容性评分
   - 定期更新配置

3. **报告管理**：
   - 选择合适的报告模板
   - 及时保存重要分析结果
   - 定期清理历史文件

## 📞 技术支持

### 日志查看

- 系统日志：控制台输出
- 错误信息：界面底部显示
- 详细日志：`logs/` 目录（如果存在）

### 测试工具

运行集成测试检查系统状态：
```bash
python test_system_integration.py
```

### 配置重置

如果遇到配置问题，可以删除配置文件重新开始：
```bash
# 备份现有配置
mv config config_backup

# 重新启动系统，会自动创建默认配置
python final_ui.py
```

## 🔄 版本更新

### 从v1.0升级到v2.0

1. 保持原有启动方式不变：`python final_ui.py`
2. 系统会自动检测并启用新功能
3. 原有配置会自动迁移
4. 如果新功能不可用，会自动回退到v1.0功能

### 功能验证

启动后检查以下项目：
- [ ] 系统状态显示 "TradingAgents v2.0"
- [ ] "LLM模型配置" 标签页包含配置管理功能
- [ ] "智能体管理" 标签页包含模型选择功能
- [ ] "报告管理" 标签页包含多模板生成功能
- [ ] 分析结果使用智能精简而非简单截取

---

**启动命令**：`python final_ui.py`

**访问地址**：http://localhost:7860

**版本**：TradingAgents v2.0 (向下兼容 v1.0)

*最后更新：2025-08-11*
