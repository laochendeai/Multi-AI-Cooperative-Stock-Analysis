# TradingAgents æ™ºèƒ½ä½“æ¨¡å‹é…ç½®ä¼˜åŒ–æŠ¥å‘Š

## ğŸ“‹ ä¼˜åŒ–æ¦‚è¿°

æ ¹æ®æ‚¨çš„åé¦ˆï¼Œæˆ‘å·²ç»å®Œæˆäº†å¯¹æ™ºèƒ½ä½“æ¨¡å‹é…ç½®éƒ¨åˆ†çš„å…¨é¢ä¼˜åŒ–ï¼Œè§£å†³äº†é‡å¤é…ç½®ã€æ¨¡å‹ç‰¹è‰²æ˜¾ç¤ºã€å•ç‹¬ä¿å­˜é…ç½®ä»¥åŠæœªé…ç½®LLMè¿‡æ»¤ç­‰é—®é¢˜ã€‚

## âœ… å·²å®Œæˆçš„ä¼˜åŒ–

### 1. ğŸ”„ ç§»é™¤é‡å¤çš„æ™ºèƒ½ä½“é€‰æ‹©

#### **é—®é¢˜**: é€‰æ‹©æ™ºèƒ½ä½“å’Œæ™ºèƒ½ä½“æ¨¡å‹é…ç½®é‡å¤
#### **è§£å†³æ–¹æ¡ˆ**: åˆå¹¶ä¸ºç»Ÿä¸€çš„æ™ºèƒ½ä½“é…ç½®ç•Œé¢

**ä¼˜åŒ–å‰:**
```
ğŸ¤– æ™ºèƒ½ä½“é€‰æ‹© (CheckboxGroup)
âš™ï¸ æ™ºèƒ½ä½“æ¨¡å‹é…ç½® (Accordion)
```

**ä¼˜åŒ–å:**
```
ğŸ¤– æ™ºèƒ½ä½“é…ç½® (ç»Ÿä¸€ç•Œé¢)
- æ¯è¡ŒåŒ…å«: [å¯ç”¨å¤é€‰æ¡†] [æ¨¡å‹é€‰æ‹©] [é€‚ç”¨åœºæ™¯]
```

### 2. ğŸ¯ æ™ºèƒ½ä½“æ¨¡å‹é…ç½®ç•Œé¢ä¼˜åŒ–

#### **æ–°çš„é…ç½®ç•Œé¢ç»“æ„**
```python
for agent in available_agents:
    with gr.Row():
        # æ™ºèƒ½ä½“å¯ç”¨å¤é€‰æ¡† (scale=2)
        agent_enabled = gr.Checkbox(label=f"ğŸ¤– {agent}")
        
        # æ¨¡å‹é€‰æ‹©ä¸‹æ‹‰æ¡† (scale=4) - åŒ…å«ç‰¹è‰²æè¿°
        agent_model = gr.Dropdown(choices=model_choices_with_description)
        
        # é€‚ç”¨åœºæ™¯æ˜¾ç¤º (scale=2)
        model_features_display = gr.Textbox(label="é€‚ç”¨åœºæ™¯")
```

### 3. ğŸŒŸ æ¨¡å‹ç‰¹è‰²åŠŸèƒ½æ˜¾ç¤º

#### **æ¨¡å‹ä¸‹æ‹‰åˆ—è¡¨å¢å¼º**
æ¯ä¸ªæ¨¡å‹é€‰é¡¹ç°åœ¨åŒ…å«è¯¦ç»†çš„ç‰¹è‰²æè¿°ï¼š

```python
model_choices = [
    ("deepseek-chat - ğŸ§  ä¸­æ–‡å¯¹è¯ä¸“å®¶ - æ“…é•¿ä¸­æ–‡ç†è§£å’Œé€»è¾‘æ¨ç†", "deepseek-chat"),
    ("gemini-pro - ğŸŒŸ å¤šæ¨¡æ€AI - æ”¯æŒæ–‡æœ¬ã€å›¾åƒç†è§£å’Œè”ç½‘æœç´¢", "gemini-pro"),
    ("moonshot-v1-8k - ğŸŒ™ é•¿æ–‡æœ¬å¤„ç† - 8Kä¸Šä¸‹æ–‡ï¼Œé€‚åˆæ–‡æ¡£åˆ†æ", "moonshot-v1-8k")
]
```

#### **è¯¦ç»†çš„æ¨¡å‹ç‰¹è‰²æ•°æ®åº“**
```python
model_features = {
    "deepseek-chat": {
        "description": "ğŸ§  ä¸­æ–‡å¯¹è¯ä¸“å®¶ - æ“…é•¿ä¸­æ–‡ç†è§£å’Œé€»è¾‘æ¨ç†",
        "features": ["ä¸­æ–‡å¯¹è¯", "é€»è¾‘æ¨ç†", "çŸ¥è¯†é—®ç­”"],
        "best_for": "ä¸­æ–‡åˆ†æã€é€»è¾‘æ¨ç†"
    },
    "gemini-pro": {
        "description": "ğŸŒŸ å¤šæ¨¡æ€AI - æ”¯æŒæ–‡æœ¬ã€å›¾åƒç†è§£å’Œè”ç½‘æœç´¢",
        "features": ["å¤šæ¨¡æ€", "è”ç½‘æœç´¢", "å›¾åƒç†è§£"],
        "best_for": "ç»¼åˆåˆ†æã€è”ç½‘æœç´¢"
    }
}
```

### 4. ğŸ’¾ å•ç‹¬ä¿å­˜åˆ†æå¸ˆæ¨¡å‹é…ç½®

#### **ä¸ªæ€§åŒ–é…ç½®ä¿å­˜**
- **ç‹¬ç«‹ä¿å­˜**: æ¯ä¸ªæ™ºèƒ½ä½“çš„æ¨¡å‹é€‰æ‹©å•ç‹¬ä¿å­˜
- **çŠ¶æ€è®°å¿†**: å¯ç”¨/ç¦ç”¨çŠ¶æ€å’Œæ¨¡å‹é€‰æ‹©éƒ½ä¼šè¢«è®°ä½
- **é…ç½®åé¦ˆ**: è¯¦ç»†çš„ä¿å­˜çŠ¶æ€æ˜¾ç¤º

```python
def save_agent_config(*agent_config_values):
    """ä¿å­˜æ™ºèƒ½ä½“æ¨¡å‹é…ç½®"""
    for i, agent in enumerate(agent_list):
        enabled = agent_config_values[base_index]      # æ˜¯å¦å¯ç”¨
        model = agent_config_values[base_index + 1]    # é€‰æ‹©çš„æ¨¡å‹
        
        # ä¿å­˜æ¨¡å‹é…ç½®
        app.update_agent_model_config(agent, model)
        status = "âœ… å¯ç”¨" if enabled else "â¸ï¸ ç¦ç”¨"
        results.append(f"{agent}: {model} ({status})")
```

### 5. ğŸ” æœªé…ç½®LLMè¿‡æ»¤ä¼˜åŒ–

#### **åªæ˜¾ç¤ºå·²é…ç½®æä¾›å•†çš„æ¨¡å‹**
```python
def get_all_available_models_list(self) -> List[str]:
    """è·å–æ‰€æœ‰å¯ç”¨æ¨¡å‹çš„å¹³é“ºåˆ—è¡¨ï¼ˆä»…åŒ…å«å·²é…ç½®çš„æä¾›å•†ï¼‰"""
    models_dict = self.get_available_models()
    configured_providers = self.get_configured_providers_list()
    
    all_models = []
    for provider, models in models_dict.items():
        # åªåŒ…å«å·²é…ç½®LLMå¯†é’¥çš„æä¾›å•†çš„æ¨¡å‹
        if provider in configured_providers:
            all_models.extend(models)
    return all_models

def get_configured_providers_list(self) -> List[str]:
    """è·å–å·²é…ç½®LLMå¯†é’¥çš„æä¾›å•†åˆ—è¡¨"""
    configured_providers = []
    if self.enhanced_app:
        llm_config = self.enhanced_app.llm_config
        for provider in llm_config.keys():
            if provider not in ["saved_time", "version"]:
                configured_providers.append(provider)
    return configured_providers
```

## ğŸ¨ ç”¨æˆ·ç•Œé¢æ”¹è¿›

### ğŸ“± æ–°çš„æ™ºèƒ½ä½“é…ç½®ç•Œé¢

#### **ç»Ÿä¸€é…ç½®è¡Œ**
æ¯ä¸ªæ™ºèƒ½ä½“å ç”¨ä¸€è¡Œï¼ŒåŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š

1. **ğŸ¤– æ™ºèƒ½ä½“åç§°** (å¤é€‰æ¡†) - å¯ç”¨/ç¦ç”¨æ™ºèƒ½ä½“
2. **ğŸ”§ æ¨¡å‹é€‰æ‹©** (ä¸‹æ‹‰æ¡†) - é€‰æ‹©ä¸“ç”¨æ¨¡å‹ï¼Œæ˜¾ç¤ºç‰¹è‰²æè¿°
3. **ğŸ¯ é€‚ç”¨åœºæ™¯** (æ–‡æœ¬æ¡†) - è‡ªåŠ¨æ˜¾ç¤ºæ‰€é€‰æ¨¡å‹çš„æœ€ä½³åº”ç”¨åœºæ™¯

#### **å®æ—¶ç‰¹è‰²æ›´æ–°**
```python
# æ¨¡å‹é€‰æ‹©å˜åŒ–æ—¶æ›´æ–°ç‰¹è‰²æ˜¾ç¤º
agent_configs[agent]["model"].change(
    fn=update_model_features,
    inputs=[agent_configs[agent]["model"]],
    outputs=[agent_configs[agent]["features"]]
)
```

### ğŸ¯ äº¤äº’ä½“éªŒä¼˜åŒ–

#### **æ™ºèƒ½åŒ–é…ç½®**
- **é»˜è®¤é€‰æ‹©**: è‡ªåŠ¨é€‰æ‹©é€‚åˆçš„é»˜è®¤æ¨¡å‹
- **å®æ—¶åé¦ˆ**: æ¨¡å‹é€‰æ‹©å˜åŒ–æ—¶ç«‹å³æ›´æ–°é€‚ç”¨åœºæ™¯
- **é…ç½®è®°å¿†**: ä¿å­˜çš„é…ç½®åœ¨ä¸‹æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨æ¢å¤

#### **æ¸…æ™°çš„çŠ¶æ€æ˜¾ç¤º**
```
ğŸ’¾ é…ç½®å·²ä¿å­˜:
market_analyst: gemini-pro (âœ… å¯ç”¨)
sentiment_analyst: deepseek-chat (âœ… å¯ç”¨)
news_analyst: moonshot-v1-8k (â¸ï¸ ç¦ç”¨)
```

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### ğŸ“Š æ¨¡å‹ç‰¹è‰²æ•°æ®ç»“æ„

#### **å®Œæ•´çš„æ¨¡å‹ä¿¡æ¯**
```python
models_with_features = {
    "deepseek-chat": {
        "provider": "deepseek",
        "description": "ğŸ§  ä¸­æ–‡å¯¹è¯ä¸“å®¶ - æ“…é•¿ä¸­æ–‡ç†è§£å’Œé€»è¾‘æ¨ç†",
        "features": ["ä¸­æ–‡å¯¹è¯", "é€»è¾‘æ¨ç†", "çŸ¥è¯†é—®ç­”"],
        "best_for": "ä¸­æ–‡åˆ†æã€é€»è¾‘æ¨ç†"
    },
    "gemini-1.5-flash": {
        "provider": "google",
        "description": "âš¡ å¿«é€Ÿå“åº” - é«˜é€Ÿå¤„ç†ï¼Œé€‚åˆå®æ—¶åˆ†æ",
        "features": ["å¿«é€Ÿå“åº”", "è”ç½‘æœç´¢", "å®æ—¶åˆ†æ"],
        "best_for": "å¿«é€Ÿåˆ†æã€å®æ—¶å“åº”"
    }
}
```

### ğŸ”„ äº‹ä»¶å¤„ç†ä¼˜åŒ–

#### **ç»Ÿä¸€çš„é…ç½®å¤„ç†**
```python
def start_analysis(symbol, depth, *agent_config_values):
    """å¼€å§‹åˆ†æ - å¤„ç†æ–°çš„é…ç½®æ ¼å¼"""
    # è§£ææ™ºèƒ½ä½“é…ç½®ï¼ˆæ¯ä¸ªæ™ºèƒ½ä½“æœ‰3ä¸ªå€¼ï¼šenabled, model, featuresï¼‰
    for i, agent in enumerate(agent_list):
        base_index = i * 3
        enabled = agent_config_values[base_index]      # æ˜¯å¦å¯ç”¨
        model = agent_config_values[base_index + 1]    # é€‰æ‹©çš„æ¨¡å‹
        
        if enabled:  # å¦‚æœæ™ºèƒ½ä½“è¢«å¯ç”¨
            selected_agents.append(agent)
            agent_models[agent] = model
```

## ğŸŒŸ ä¼˜åŒ–æ•ˆæœ

### âœ… è§£å†³çš„é—®é¢˜

1. **âœ… ç§»é™¤é‡å¤é…ç½®**: ä¸å†æœ‰é‡å¤çš„æ™ºèƒ½ä½“é€‰æ‹©ç•Œé¢
2. **âœ… æ¨¡å‹ç‰¹è‰²æ˜¾ç¤º**: æ¯ä¸ªæ¨¡å‹éƒ½æœ‰è¯¦ç»†çš„ç‰¹è‰²æè¿°å’Œé€‚ç”¨åœºæ™¯
3. **âœ… å•ç‹¬é…ç½®ä¿å­˜**: æ¯ä¸ªæ™ºèƒ½ä½“çš„æ¨¡å‹é€‰æ‹©ç‹¬ç«‹ä¿å­˜
4. **âœ… è¿‡æ»¤æœªé…ç½®LLM**: åªæ˜¾ç¤ºå·²é…ç½®å¯†é’¥çš„æä¾›å•†æ¨¡å‹
5. **âœ… å®æ—¶ç‰¹è‰²æ›´æ–°**: é€‰æ‹©æ¨¡å‹æ—¶ç«‹å³æ˜¾ç¤ºé€‚ç”¨åœºæ™¯

### ğŸ¯ ç”¨æˆ·ä½“éªŒæå‡

1. **ç®€åŒ–æ“ä½œ**: ä¸€ä¸ªç•Œé¢å®Œæˆæ™ºèƒ½ä½“é€‰æ‹©å’Œæ¨¡å‹é…ç½®
2. **ç›´è§‚æ˜¾ç¤º**: æ¸…æ™°çš„æ¨¡å‹ç‰¹è‰²å’Œé€‚ç”¨åœºæ™¯è¯´æ˜
3. **æ™ºèƒ½è¿‡æ»¤**: è‡ªåŠ¨è¿‡æ»¤æ‰ä¸å¯ç”¨çš„æ¨¡å‹é€‰é¡¹
4. **é…ç½®è®°å¿†**: ä¿å­˜çš„é…ç½®æŒä¹…åŒ–å­˜å‚¨
5. **å®æ—¶åé¦ˆ**: ç«‹å³æ˜¾ç¤ºé…ç½®å˜åŒ–çš„æ•ˆæœ

## ğŸ“ ä¿®æ”¹æ–‡ä»¶

### ä¸»è¦ä¿®æ”¹
- **`final_integrated_app.py`** - å®Œæ•´çš„æ™ºèƒ½ä½“é…ç½®ä¼˜åŒ–

### æ–°å¢æ–¹æ³•
1. **`get_configured_providers_list()`** - è·å–å·²é…ç½®æä¾›å•†åˆ—è¡¨
2. **`get_models_with_features()`** - è·å–æ¨¡å‹ç‰¹è‰²ä¿¡æ¯
3. **`update_model_features()`** - æ›´æ–°æ¨¡å‹ç‰¹è‰²æ˜¾ç¤º

### ä¼˜åŒ–çš„UIç»„ä»¶
1. **æ™ºèƒ½ä½“é…ç½®è¡Œ** - ç»Ÿä¸€çš„é…ç½®ç•Œé¢
2. **æ¨¡å‹é€‰æ‹©ä¸‹æ‹‰æ¡†** - åŒ…å«ç‰¹è‰²æè¿°
3. **é€‚ç”¨åœºæ™¯æ˜¾ç¤º** - å®æ—¶æ›´æ–°çš„åœºæ™¯è¯´æ˜

## ğŸ‰ æ€»ç»“

æˆ‘å·²ç»å®Œæˆäº†æ‚¨è¦æ±‚çš„æ‰€æœ‰ä¼˜åŒ–ï¼š

1. âœ… **ç§»é™¤é‡å¤é…ç½®**: åˆå¹¶æ™ºèƒ½ä½“é€‰æ‹©å’Œæ¨¡å‹é…ç½®ä¸ºç»Ÿä¸€ç•Œé¢
2. âœ… **ä¿ç•™æ™ºèƒ½ä½“æ¨¡å‹é…ç½®**: ä¿æŒå®Œæ•´çš„é…ç½®åŠŸèƒ½
3. âœ… **æ¨¡å‹ç‰¹è‰²æ˜¾ç¤º**: åœ¨ä¸‹æ‹‰åˆ—è¡¨ä¸­æ˜¾ç¤ºæ¯ä¸ªæ¨¡å‹çš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯
4. âœ… **å•ç‹¬ä¿å­˜é…ç½®**: ä¸ºæ¯ä¸ªåˆ†æå¸ˆå•ç‹¬ä¿å­˜æ¨¡å‹é€‰æ‹©
5. âœ… **è¿‡æ»¤æœªé…ç½®LLM**: åªæ˜¾ç¤ºå·²é…ç½®å¯†é’¥çš„æä¾›å•†æ¨¡å‹

**æ™ºèƒ½ä½“æ¨¡å‹é…ç½®ç°åœ¨æ›´åŠ ç®€æ´ã€ç›´è§‚å’Œå®ç”¨ï¼** ğŸ‰

### ğŸš€ å¯åŠ¨æ–¹æ³•
```bash
python final_integrated_app.py
# è®¿é—®: http://localhost:7862
```
